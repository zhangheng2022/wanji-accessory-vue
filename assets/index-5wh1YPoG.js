import{j as V,d as S,u as z}from"./index-DM0zgbCm.js";/* empty css                     *//* empty css                  *//* empty css                 */import{r as d,t as M,az as N,V as R,v as U,x as y,C as q,G as A,L as o,A as u,u as e,D as r,R as T,I as j,ak as D}from"./vue-jof-YVwm.js";import{_ as K}from"./index.vuevuetypescriptsetuptruelang-DIB1otVK.js";import{N as L,y as O,a5 as G,a6 as P,a7 as Z,a8 as $,o as H,a9 as J,aa as Q,k as W,P as X,E as Y}from"./element-jzOnSt0q.js";import ee from"./Owl-CL6HjLhE.js";import{_ as oe}from"./plugin-vueexport-helper-DlAUqK2U.js";import"./vxe-DHshvtHX.js";/* empty css                        *//* empty css                  */import"./el-tooltip-l0sNRNKZ.js";const te="/wanji-accessory-vue/assets/logo-text-2-ZOi_FAtB.png";function se(){return V({url:"auth/captcha",method:"get"})}function re(a){return V({url:"auth/login",method:"post",data:a})}function ae(){const a=d(!1);return{isFocus:a,handleBlur:()=>{a.value=!1},handleFocus:()=>{a.value=!0}}}const ne={class:"login-container"},le={class:"login-card"},ie={class:"content"},ue=M({__name:"index",setup(a){const _=N(),g=S(),k=z(),{isFocus:B,handleBlur:h,handleFocus:x}=ae(),v=d(null),c=d(!1),m=d(""),s=R({username:"admin",password:"12345678",code:""}),b={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:16,message:"长度在 8 到 16 个字符",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]};function w(){var n;(n=v.value)==null||n.validate(t=>{if(!t){Y.error("表单校验不通过");return}c.value=!0,re(s).then(({data:l})=>{g.setToken(l.token),_.push("/")}).catch(()=>{p(),s.password=""}).finally(()=>{c.value=!1})})}function p(){s.code="",m.value="",se().then(n=>{m.value=n.data})}return p(),(n,t)=>{const l=O,f=L,F=H,E=$,C=W,I=X;return y(),U("div",ne,[e(k).showThemeSwitch?(y(),q(K,{key:0,class:"theme-switch"})):A("",!0),o(ee,{"close-eyes":e(B)},null,8,["close-eyes"]),u("div",le,[t[4]||(t[4]=u("div",{class:"title"},[u("img",{src:te})],-1)),u("div",ie,[o(I,{ref_key:"loginFormRef",ref:v,model:e(s),rules:b,onKeyup:D(w,["enter"])},{default:r(()=>[o(f,{prop:"username"},{default:r(()=>[o(l,{modelValue:e(s).username,"onUpdate:modelValue":t[0]||(t[0]=i=>e(s).username=i),modelModifiers:{trim:!0},placeholder:"用户名",type:"text",tabindex:"1","prefix-icon":e(G),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),o(f,{prop:"password"},{default:r(()=>[o(l,{modelValue:e(s).password,"onUpdate:modelValue":t[1]||(t[1]=i=>e(s).password=i),modelModifiers:{trim:!0},placeholder:"密码",type:"password",tabindex:"2","prefix-icon":e(P),size:"large","show-password":"",onBlur:e(h),onFocus:e(x)},null,8,["modelValue","prefix-icon","onBlur","onFocus"])]),_:1}),o(f,{prop:"code"},{default:r(()=>[o(l,{modelValue:e(s).code,"onUpdate:modelValue":t[2]||(t[2]=i=>e(s).code=i),modelModifiers:{trim:!0},placeholder:"验证码",type:"text",tabindex:"3","prefix-icon":e(Z),maxlength:"7",size:"large",onBlur:e(h),onFocus:e(x)},{append:r(()=>[o(E,{src:e(m),draggable:"false",onClick:p},{placeholder:r(()=>[o(F,null,{default:r(()=>[o(e(Q))]),_:1})]),error:r(()=>[o(F,null,{default:r(()=>[o(e(J))]),_:1})]),_:1},8,["src"])]),_:1},8,["modelValue","prefix-icon","onBlur","onFocus"])]),_:1}),o(C,{loading:e(c),type:"primary",size:"large",onClick:T(w,["prevent"])},{default:r(()=>t[3]||(t[3]=[j(" 登 录 ")])),_:1},8,["loading"])]),_:1},8,["model"])])])])}}}),Ve=oe(ue,[["__scopeId","data-v-bf361db9"]]);export{Ve as default};
